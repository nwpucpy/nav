function F = get_F(ekf_param,imu)

    grob_rad = imu.grob_rad;
    grob_rad_pre = imu.grob_rad_pre;
    accb_m_s = imu.accb_m_s;
    Xk_1 = ekf_param.Xk_1;
    earthRateNED = imu.earthRateNED;
    dt = imu.dt_imu;

    omn = earthRateNED(1) * dt;
    ome = earthRateNED(2) * dt;
    omd = earthRateNED(3) * dt;
    
    accx = accb_m_s(1);
    accy = accb_m_s(2);
    accz = accb_m_s(3);
    
    grox = grob_rad(1);
    groy = grob_rad(2);
    groz = grob_rad(3);
    
    gro_prevx = grob_rad_pre(1);
    gro_prevy = grob_rad_pre(2);
    gro_prevz = grob_rad_pre(3);
    
    q0 = Xk_1(1);
    q1 = Xk_1(2);
    q2 = Xk_1(3);
    q3 = Xk_1(4);
    
    grox_b = Xk_1(11);
    groy_b = Xk_1(12);
    groz_b = Xk_1(13);    
    
    accx_b = Xk_1(14);
    accy_b = Xk_1(15);
    accz_b = Xk_1(16);     
    
    % deltaAngle = (gro   - gro_b ) + 1/12*cross(gro_prev,gro) - transpose(Tbn)*(  [omn; ome; omd]  );%单位全部为rad
%     deltaVelocity = acc - acc_b;%单位为m/s
% SF = zeros(24,1);
% SF(1) = ome*q3 - omd*q2 + omn*q0;
% SF(2) = omd*q1 + ome*q0 - omn*q3;
% SF(3) = omd*q0 - ome*q1 + omn*q2;
% SF(4) = omd*q3 + ome*q2 + omn*q1;
% SF(5) = (ome*(q0^2 - q1^2 + q2^2 - q3^2))/2;
% SF(6) = (omd*(q0^2 - q1^2 - q2^2 + q3^2))/2;
% SF(7) = (omn*(q0^2 + q1^2 - q2^2 - q3^2))/2;
% SF(8) = accz - accz_b;
% SF(9) = accy - accy_b;
% SF(10) = accx - accx_b;
% SF(11) = 2*q1*SF(10) + 2*q2*SF(9) + 2*q3*SF(8);
% SF(12) = 2*q0*q3 - 2*q1*q2;
% SF(13) = 2*q0*q1 - 2*q2*q3;
% SF(14) = (omd*(2*q0*q1 + 2*q2*q3))/2;
% SF(15) = (omn*(2*q0*q2 + 2*q1*q3))/2;
% SF(16) = 2*q0*q2 - 2*q1*q3;
% SF(17) = (ome*(2*q0*q3 + 2*q1*q2))/2;
% SF(18) = 2*q0*SF(9) - 2*q1*SF(8) + 2*q3*SF(10);
% SF(19) = 2*q0*SF(10) + 2*q2*SF(8) - 2*q3*SF(9);
% SF(20) = (groz*gro_prevx)/24;
% SF(21) = (grox*gro_prevy)/24;
% SF(22) = (groy*gro_prevz)/24;
% SF(23) = (omd*SF(16))/2;
% SF(24) = (ome*SF(13))/2;
% F = zeros(16,16);
% F(1,1) = q1*SF(1) + q2*SF(2) + q3*SF(3) + 1;
% F(1,2) = grox_b/2 - grox/2 + SF(7) + SF(17) + SF(22) - (omd*SF(16))/2 + q1*SF(4) + q2*SF(3) - q3*SF(2) - (groz*gro_prevy)/24;
% F(1,3) = groy_b/2 - groy/2 + SF(5) + SF(14) + SF(20) - (omn*SF(12))/2 - q1*SF(3) + q3*SF(1) + q2*SF(4) - (grox*gro_prevz)/24;
% F(1,4) = groz_b/2 - groz/2 + SF(6) + SF(15) + SF(21) - (ome*SF(13))/2 + q1*SF(2) - q2*SF(1) + q3*SF(4) - (groy*gro_prevx)/24;
% F(1,11) = q1/2;
% F(1,12) = q2/2;
% F(1,13) = q3/2;
% F(2,1) = grox/2 - grox_b/2 - SF(7) - SF(17) - SF(22) + SF(23) - q0*SF(1) - q2*SF(3) + q3*SF(2) + (groz*gro_prevy)/24;
% F(2,2) = q2*SF(2) - q0*SF(4) + q3*SF(3) + 1;
% F(2,3) = groz/2 - groz_b/2 - SF(6) - SF(15) - SF(21) + SF(24) + q0*SF(3) - q2*SF(1) + q3*SF(4) + (groy*gro_prevx)/24;
% F(2,4) = groy_b/2 - groy/2 + SF(5) + SF(14) + SF(20) - (omn*SF(12))/2 - q0*SF(2) - q3*SF(1) - q2*SF(4) - (grox*gro_prevz)/24;
% F(2,11) = -q0/2;
% F(2,12) = q3/2;
% F(2,13) = -q2/2;
% F(3,1) = groy/2 - groy_b/2 - SF(5) - SF(14) - SF(20) + (omn*SF(12))/2 - q0*SF(2) + q1*SF(3) - q3*SF(1) + (grox*gro_prevz)/24;
% F(3,2) = groz_b/2 - groz/2 + SF(6) + SF(15) + SF(21) - SF(24) - q0*SF(3) - q1*SF(2) - q3*SF(4) - (groy*gro_prevx)/24;
% F(3,3) = q1*SF(1) - q0*SF(4) + q3*SF(3) + 1;
% F(3,4) = grox/2 - grox_b/2 - SF(7) - SF(17) - SF(22) + SF(23) + q0*SF(1) + q1*SF(4) - q3*SF(2) + (groz*gro_prevy)/24;
% F(3,11) = -q3/2;
% F(3,12) = -q0/2;
% F(3,13) = q1/2;
% F(4,1) = groz/2 - groz_b/2 - SF(6) - SF(15) - SF(21) + SF(24) - q0*SF(3) - q1*SF(2) + q2*SF(1) + (groy*gro_prevx)/24;
% F(4,2) = groy/2 - groy_b/2 - SF(5) - SF(14) - SF(20) + (omn*SF(12))/2 + q0*SF(2) - q1*SF(3) + q2*SF(4) + (grox*gro_prevz)/24;
% F(4,3) = grox_b/2 - grox/2 + SF(7) + SF(17) + SF(22) - SF(23) - q0*SF(1) - q1*SF(4) - q2*SF(3) - (groz*gro_prevy)/24;
% F(4,4) = q1*SF(1) - q0*SF(4) + q2*SF(2) + 1;
% F(4,11) = q2/2;
% F(4,12) = -q1/2;
% F(4,13) = -q0/2;
% F(5,1) = SF(19);
% F(5,2) = SF(11);
% F(5,3) = 2*q0*SF(8) + 2*q1*SF(9) - 2*q2*SF(10);
% F(5,4) = 2*q1*SF(8) - 2*q0*SF(9) - 2*q3*SF(10);
% F(5,5) = 1;
% F(5,14) = q2^2 - q1^2 - q0^2 + q3^2;
% F(5,15) = SF(12);
% F(5,16) = - 2*q0*q2 - 2*q1*q3;
% F(6,1) = SF(18);
% F(6,2) = 2*q2*SF(10) - 2*q1*SF(9) - 2*q0*SF(8);
% F(6,3) = SF(11);
% F(6,4) = SF(19);
% F(6,6) = 1;
% F(6,14) = - 2*q0*q3 - 2*q1*q2;
% F(6,15) = q1^2 - q0^2 - q2^2 + q3^2;
% F(6,16) = SF(13);
% F(7,1) = 2*q0*SF(8) + 2*q1*SF(9) - 2*q2*SF(10);
% F(7,2) = SF(18);
% F(7,3) = 2*q3*SF(9) - 2*q2*SF(8) - 2*q0*SF(10);
% F(7,4) = SF(11);
% F(7,7) = 1;
% F(7,14) = SF(16);
% F(7,15) = - 2*q0*q1 - 2*q2*q3;
% F(7,16) = q1^2 - q0^2 + q2^2 - q3^2;
% F(8,5) = dt;
% F(8,8) = 1;
% F(9,6) = dt;
% F(9,9) = 1;
% F(10,7) = dt;
% F(10,10) = 1;
% F(11,11) = 1;
% F(12,12) = 1;
% F(13,13) = 1;
% F(14,14) = 1;
% F(15,15) = 1;
% F(16,16) = 1;

% deltaAngle = (gro   - gro_b );%单位全部为rad
% deltaVelocity = acc - acc_b;%单位为m/s

SF = zeros(21,1);
SF(1) = accz - accz_b;
SF(2) = accy - accy_b;
SF(3) = accx - accx_b;
SF(4) = 2*q1*SF(3) + 2*q2*SF(2) + 2*q3*SF(1);
SF(5) = 2*q0*SF(2) - 2*q1*SF(1) + 2*q3*SF(3);
SF(6) = 2*q0*SF(3) + 2*q2*SF(1) - 2*q3*SF(2);
SF(7) = groy/2 - groy_b/2;
SF(8) = groz/2 - groz_b/2;
SF(9) = grox/2 - grox_b/2;
SF(10) = grox_b/2 - grox/2;
SF(11) = groz_b/2 - groz/2;
SF(12) = groy_b/2 - groy/2;
SF(13) = 2*q1*SF(2);
SF(14) = 2*q0*SF(1);
SF(15) = q1/2;
SF(16) = q2/2;
SF(17) = q3/2;
SF(18) = q3^2;
SF(19) = q2^2;
SF(20) = q1^2;
SF(21) = q0^2;
F = zeros(16,16);
F(1,1) = 1;
F(1,2) = SF(10);
F(1,3) = SF(12);
F(1,4) = SF(11);
F(1,11) = SF(15);
F(1,12) = SF(16);
F(1,13) = SF(17);
F(2,1) = SF(9);
F(2,2) = 1;
F(2,3) = SF(8);
F(2,4) = SF(12);
F(2,11) = -q0/2;
F(2,12) = SF(17);
F(2,13) = -SF(16);
F(3,1) = SF(7);
F(3,2) = SF(11);
F(3,3) = 1;
F(3,4) = SF(9);
F(3,11) = -SF(17);
F(3,12) = -q0/2;
F(3,13) = SF(15);
F(4,1) = SF(8);
F(4,2) = SF(7);
F(4,3) = SF(10);
F(4,4) = 1;
F(4,11) = SF(16);
F(4,12) = -SF(15);
F(4,13) = -q0/2;
F(5,1) = SF(6);
F(5,2) = SF(4);
F(5,3) = SF(13) + SF(14) - 2*q2*SF(3);
F(5,4) = 2*q1*SF(1) - 2*q0*SF(2) - 2*q3*SF(3);
F(5,5) = 1;
F(5,14) = SF(18) + SF(19) - SF(20) - SF(21);
F(5,15) = 2*q0*q3 - 2*q1*q2;
F(5,16) = - 2*q0*q2 - 2*q1*q3;
F(6,1) = SF(5);
F(6,2) = 2*q2*SF(3) - SF(14) - SF(13);
F(6,3) = SF(4);
F(6,4) = SF(6);
F(6,6) = 1;
F(6,14) = - 2*q0*q3 - 2*q1*q2;
F(6,15) = SF(18) - SF(19) + SF(20) - SF(21);
F(6,16) = 2*q0*q1 - 2*q2*q3;
F(7,1) = SF(13) + SF(14) - 2*q2*SF(3);
F(7,2) = SF(5);
F(7,3) = 2*q3*SF(2) - 2*q2*SF(1) - 2*q0*SF(3);
F(7,4) = SF(4);
F(7,7) = 1;
F(7,14) = 2*q0*q2 - 2*q1*q3;
F(7,15) = - 2*q0*q1 - 2*q2*q3;
F(7,16) = SF(19) - SF(18) + SF(20) - SF(21);
F(8,5) = dt;
F(8,8) = 1;
F(9,6) = dt;
F(9,9) = 1;
F(10,7) = dt;
F(10,10) = 1;
F(11,11) = 1;
F(12,12) = 1;
F(13,13) = 1;
F(14,14) = 1;
F(15,15) = 1;
F(16,16) = 1;

    

    % deltaAngle = (gro   ) %单位全部为rad
%     deltaVelocity = acc ;%单位为m/s
% F = zeros(16,16);
% F(1,1) = 1;
% F(1,2) = -grox/2;
% F(1,3) = -groy/2;
% F(1,4) = -groz/2;
% F(2,1) = grox/2;
% F(2,2) = 1;
% F(2,3) = groz/2;
% F(2,4) = -groy/2;
% F(3,1) = groy/2;
% F(3,2) = -groz/2;
% F(3,3) = 1;
% F(3,4) = grox/2;
% F(4,1) = groz/2;
% F(4,2) = groy/2;
% F(4,3) = -grox/2;
% F(4,4) = 1;
% F(5,1) = 2*accx*q0 - 2*accy*q3 + 2*accz*q2;
% F(5,2) = 2*accx*q1 + 2*accy*q2 + 2*accz*q3;
% F(5,3) = 2*accy*q1 - 2*accx*q2 + 2*accz*q0;
% F(5,4) = 2*accz*q1 - 2*accx*q3 - 2*accy*q0;
% F(5,5) = 1;
% F(6,1) = 2*accy*q0 + 2*accx*q3 - 2*accz*q1;
% F(6,2) = 2*accx*q2 - 2*accy*q1 - 2*accz*q0;
% F(6,3) = 2*accx*q1 + 2*accy*q2 + 2*accz*q3;
% F(6,4) = 2*accx*q0 - 2*accy*q3 + 2*accz*q2;
% F(6,6) = 1;
% F(7,1) = 2*accy*q1 - 2*accx*q2 + 2*accz*q0;
% F(7,2) = 2*accy*q0 + 2*accx*q3 - 2*accz*q1;
% F(7,3) = 2*accy*q3 - 2*accx*q0 - 2*accz*q2;
% F(7,4) = 2*accx*q1 + 2*accy*q2 + 2*accz*q3;
% F(7,7) = 1;
% F(8,5) = dt;
% F(8,8) = 1;
% F(9,6) = dt;
% F(9,9) = 1;
% F(10,7) = dt;
% F(10,10) = 1;
% F(11,11) = 1;
% F(12,12) = 1;
% F(13,13) = 1;
% F(14,14) = 1;
% F(15,15) = 1;
% F(16,16) = 1;



end